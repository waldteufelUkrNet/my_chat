const log=require("../libs/log")(module),objectId=require("mongodb").ObjectId,rControl=require("./renderController.js"),User=require("../models/user.js").User;exports.addToBlockList=function(e,r){const n=e.session.user._id,s=e.body.id;User.findByIdAndUpdate(new objectId(n),{$push:{blocklist:s}},(function(n,s){if(n)throw r.sendStatus(500),log.error("\nerr.name:\n    "+n.name+"\nerr.message:\n    "+n.message+"\nerr.stack:\n    "+n.stack),n;rControl.renderUserCard(e,r)}))},exports.removeFromBlockList=function(e,r){const n=e.session.user._id,s=e.body.id;User.findByIdAndUpdate(new objectId(n),{$pull:{blocklist:s}},(function(n,s){if(n)throw r.sendStatus(500),log.error("\nerr.name:\n    "+n.name+"\nerr.message:\n    "+n.message+"\nerr.stack:\n    "+n.stack),n;rControl.renderUserCard(e,r)}))},exports.addToContacts=function(e,r){const n=e.session.user._id,s=e.body.id;User.findByIdAndUpdate(new objectId(n),{$push:{contacts:s}},(function(n,s){if(n)throw r.sendStatus(500),log.error("\nerr.name:\n    "+n.name+"\nerr.message:\n    "+n.message+"\nerr.stack:\n    "+n.stack),n;rControl.renderUserCard(e,r)}))},exports.removeFromContacts=function(e,r){const n=e.session.user._id,s=e.body.id;User.findByIdAndUpdate(new objectId(n),{$pull:{contacts:s}},(function(n,s){if(n)throw r.sendStatus(500),log.error("\nerr.name:\n    "+n.name+"\nerr.message:\n    "+n.message+"\nerr.stack:\n    "+n.stack),n;rControl.renderUserCard(e,r)}))};