const express=require("express"),config=require("../config"),controller=require("../controllers/chatController.js"),multer=require("multer"),objectId=require("mongodb").ObjectId,router=express.Router(),storageConfig=multer.diskStorage({destination:(e,r,o)=>{o(null,config.get("dataStoragePath"))},filename:(e,r,o)=>{let t=String(new objectId);e.headers.fileID=t,o(null,t+"."+e.headers.fileext)}}),upload=multer({storage:storageConfig});router.post("/sendMessageToServer",controller.getMessageFromClient),router.post("/changeMessageStatus",controller.changeMessageStatus),router.post("/file",upload.single("file"),controller.file),router.post("/fileDownload",controller.fileDownload),module.exports=router;