const express=require("express"),config=require("../config"),controller=require("../controllers/settingsController.js"),multer=require("multer"),router=express.Router(),storageConfig=multer.diskStorage({destination:(r,e,o)=>{o(null,config.get("avatarPathFromServer"))},filename:(r,e,o)=>{o(null,r.session.user._id+".jpg")}}),storageGroupConfig=multer.diskStorage({destination:(r,e,o)=>{o(null,config.get("avatarPathFromServer"))},filename:(r,e,o)=>{o(null,r.header("group")+".jpg")}}),upload=multer({storage:storageConfig}),uploadGroup=multer({storage:storageGroupConfig});router.post("/checkOldPassword",controller.checkOldPassword),router.post("/changePassword",controller.changePassword),router.post("/changeUserName",controller.changeUserName),router.post("/manageGroup",controller.manageGroup),router.post("/changeAva",upload.single("ava"),controller.changeAva),router.post("/changeGroupAva",uploadGroup.single("ava"),controller.changeGroupAva),module.exports=router;